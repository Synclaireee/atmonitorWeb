<div class="pt-5 mt-3 animated fadeIn">
    <!--PKT Table-->
    <div class="col-11 w-100 m-auto">
        <div>
            <div class="animated fadeIn d-inline float-right">
                <button class="btn btn-dark mb-2 rounded" (click)="reload()">Refresh</button>
            </div>

            <!--test search-->
            <div class="animated fadeIn d-inline float-left form-group">
                <form>
                    <select class="form-control bg-dark text-light" [(ngModel)]="selectedVendor">
                        <option [value]="''">Show All...</option>
                        <option *ngFor="let vendor of vendorList" [value]="vendor.data()['pktVendorId']">
                            {{vendor.data()['pktVendorId']}} - {{vendor.data()['pktVendorName']}}
                        </option>
                    </select>
                </form>
            </div>


            <!--END TEST SEARCH-->

            <!--testDownload-->
            <!--<div class="animated fadeIn d-inline float-right">-->
            <!--<button class="btn btn-dark mb-2 rounded" (click)="test()" id="test">test</button>-->
            <!--</div>-->
            <!--end-->
        </div>
        <table class="table table-inverse">
            <thead>
            <tr>
                <th class="text-center align-middle" scope="col">Ticket</th>
                <th class="text-center align-middle" scope="col">WSID</th>
                <th class="text-center align-middle" scope="col">Lokasi</th>
                <th class="text-center align-middle" scope="col">SN</th>
                <th class="text-center align-middle" scope="col">PKT</th>
                <th class="text-center align-middle" scope="col">Vendor</th>
                <th class="text-center align-middle" scope="col">Waktu</th>
                <th class="text-center align-middle" scope="col">Masalah</th>
                <th class="text-center align-middle" scope="col">Status PKT</th>
                <th class="text-center align-middle" scope="col">Status Vendor</th>
                <th class="text-center align-middle" scope="col">Aksi</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let job of jobList">
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["ticketNum"].toString()}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["wsid"].toString()}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["location"].toString()}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["serialNum"].toString()}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["pktName"].toString()}}

                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["vendorName"].toString()}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["startDatetime"]|date:'dd MMMM y HH:mm:ss'}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">

                    {{job.data()["problemDesc"].toString()}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["status"].toString()}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    {{job.data()["vStatus"].toString().substring(1,job.data()["vStatus"].toString().length)}}
                </td>
                <td class="text-center align-middle"
                    *ngIf="( selectedVendor == '' || selectedVendor == job.data()['vendorId'] ) && ( job.data()['vStatus'] != null && (job.data()['vStatus'] == 'vFINISHED' && job.data()['status'] =='FINISHED' ))">
                    <material-fab mini title="Detail Job"
                                  [routerLink]="detailUrl(job.data()['ticketNum'])">
                        <material-icon icon="assignment"></material-icon>
                    </material-fab>

                    <!--<material-fab mini title="History Machine">-->
                        <!--<material-icon icon="history"></material-icon>-->
                    <!--</material-fab>-->
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>